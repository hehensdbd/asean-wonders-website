{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///E:/2/asean-wonders-website/app/auth/login/page.tsx"],"sourcesContent":["\"use client\"\r\n\r\nimport { useState, useEffect } from \"react\"\r\nimport { useRouter, useSearchParams } from \"next/navigation\"\r\nimport Link from \"next/link\"\r\nimport { Eye, EyeOff, LogIn, User, Lock, AlertCircle, Mail } from \"lucide-react\"\r\nimport Image from \"next/image\"\r\n\r\nexport default function LoginPage() {\r\n  const [email, setEmail] = useState(\"\")\r\n  const [password, setPassword] = useState(\"\")\r\n  const [showPassword, setShowPassword] = useState(false)\r\n  const [rememberMe, setRememberMe] = useState(false)\r\n  const [isLoading, setIsLoading] = useState(false)\r\n  const [error, setError] = useState(\"\")\r\n  \r\n  const router = useRouter()\r\n  const searchParams = useSearchParams()\r\n  const callbackUrl = searchParams.get('callbackUrl') || \"/\"\r\n\r\n  // 检查是否已登录\r\n  useEffect(() => {\r\n    const token = localStorage.getItem('auth_token')\r\n    if (token) {\r\n      router.push(callbackUrl)\r\n    }\r\n  }, [router, callbackUrl])\r\n\r\n  const handleSubmit = async (e: React.FormEvent) => {\r\n    e.preventDefault()\r\n    setError(\"\")\r\n    setIsLoading(true)\r\n\r\n    try {\r\n      // 模拟API调用\r\n      await new Promise(resolve => setTimeout(resolve, 1000))\r\n\r\n      // 模拟验证\r\n      if (!email || !password) {\r\n        throw new Error(\"请填写所有必填字段\")\r\n      }\r\n\r\n      if (!email.includes(\"@\")) {\r\n        throw new Error(\"请输入有效的邮箱地址\")\r\n      }\r\n\r\n      // 模拟成功登录\r\n      const mockUser = {\r\n        id: \"12345\",\r\n        name: email.split(\"@\")[0],\r\n        email: email,\r\n        avatar: null,\r\n        createdAt: new Date().toISOString()\r\n      }\r\n\r\n      const mockToken = \"mock_jwt_token_\" + Math.random().toString(36).substring(7)\r\n\r\n      // 保存到localStorage\r\n      localStorage.setItem('auth_token', mockToken)\r\n      localStorage.setItem('user_info', JSON.stringify(mockUser))\r\n      \r\n      // 如果是\"记住我\"，保存到sessionStorage以便刷新后保持登录\r\n      if (rememberMe) {\r\n        sessionStorage.setItem('remembered_auth', 'true')\r\n      }\r\n\r\n      // 触发storage事件以更新导航栏状态\r\n      window.dispatchEvent(new Event('storage'))\r\n\r\n      // 获取回调URL或跳转到首页\r\n      const savedCallback = localStorage.getItem('login_callback') || callbackUrl\r\n      localStorage.removeItem('login_callback')\r\n      \r\n      router.push(savedCallback)\r\n\r\n    } catch (err) {\r\n      setError(err instanceof Error ? err.message : \"登录失败，请稍后重试\")\r\n    } finally {\r\n      setIsLoading(false)\r\n    }\r\n  }\r\n\r\n  const handleSocialLogin = (provider: string) => {\r\n    alert(`即将通过${provider}登录，此功能待实现`)\r\n  }\r\n\r\n  return (\r\n    <div className=\"min-h-screen bg-gradient-to-br from-blue-50 via-indigo-50 to-purple-50 flex flex-col justify-center py-12 sm:px-6 lg:px-8\">\r\n      <div className=\"sm:mx-auto sm:w-full sm:max-w-md\">\r\n        <div className=\"flex justify-center\">\r\n          <Link href=\"/\" className=\"flex items-center gap-2 hover:opacity-80 transition-opacity\">\r\n            <div className=\"relative w-40 h-16\">\r\n              <Image\r\n                src=\"/images/e4-b8-9c-e7-9b-9f-e4-b8-87-e8-b1-a12.png\"\r\n                alt=\"东盟万象\"\r\n                fill\r\n                className=\"object-contain\"\r\n                priority\r\n              />\r\n            </div>\r\n          </Link>\r\n        </div>\r\n        <h2 className=\"mt-6 text-center text-3xl font-bold text-[#002760]\">\r\n          欢迎回来\r\n        </h2>\r\n        <p className=\"mt-2 text-center text-sm text-gray-600\">\r\n          登录您的账户，探索东盟文化之美\r\n        </p>\r\n      </div>\r\n\r\n      <div className=\"mt-8 sm:mx-auto sm:w-full sm:max-w-md\">\r\n        <div className=\"bg-white py-8 px-4 shadow-2xl shadow-blue-100/50 sm:rounded-2xl sm:px-10 border border-blue-100\">\r\n          {error && (\r\n            <div className=\"mb-6 bg-red-50 border border-red-200 text-red-600 px-4 py-3 rounded-lg flex items-center gap-2\">\r\n              <AlertCircle size={20} />\r\n              <span className=\"text-sm\">{error}</span>\r\n            </div>\r\n          )}\r\n\r\n          <form onSubmit={handleSubmit} className=\"space-y-6\">\r\n            <div>\r\n              <label htmlFor=\"email\" className=\"block text-sm font-medium text-gray-700 mb-2\">\r\n                邮箱地址\r\n              </label>\r\n              <div className=\"relative\">\r\n                <div className=\"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none\">\r\n                  <Mail size={20} className=\"text-gray-400\" />\r\n                </div>\r\n                <input\r\n                  id=\"email\"\r\n                  name=\"email\"\r\n                  type=\"email\"\r\n                  autoComplete=\"email\"\r\n                  required\r\n                  value={email}\r\n                  onChange={(e) => setEmail(e.target.value)}\r\n                  className=\"appearance-none block w-full pl-12 pr-3 py-3 border border-gray-300 rounded-xl placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-[#002760] focus:border-transparent transition-all text-gray-900 bg-gray-50 focus:bg-white\"\r\n                  placeholder=\"请输入您的邮箱\"\r\n                />\r\n              </div>\r\n            </div>\r\n\r\n            <div>\r\n              <label htmlFor=\"password\" className=\"block text-sm font-medium text-gray-700 mb-2\">\r\n                密码\r\n              </label>\r\n              <div className=\"relative\">\r\n                <div className=\"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none\">\r\n                  <Lock size={20} className=\"text-gray-400\" />\r\n                </div>\r\n                <input\r\n                  id=\"password\"\r\n                  name=\"password\"\r\n                  type={showPassword ? \"text\" : \"password\"}\r\n                  autoComplete=\"current-password\"\r\n                  required\r\n                  value={password}\r\n                  onChange={(e) => setPassword(e.target.value)}\r\n                  className=\"appearance-none block w-full pl-12 pr-12 py-3 border border-gray-300 rounded-xl placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-[#002760] focus:border-transparent transition-all text-gray-900 bg-gray-50 focus:bg-white\"\r\n                  placeholder=\"请输入您的密码\"\r\n                />\r\n                <button\r\n                  type=\"button\"\r\n                  onClick={() => setShowPassword(!showPassword)}\r\n                  className=\"absolute inset-y-0 right-0 pr-3 flex items-center\"\r\n                >\r\n                  {showPassword ? (\r\n                    <EyeOff size={20} className=\"text-gray-400 hover:text-gray-600\" />\r\n                  ) : (\r\n                    <Eye size={20} className=\"text-gray-400 hover:text-gray-600\" />\r\n                  )}\r\n                </button>\r\n              </div>\r\n            </div>\r\n\r\n            <div className=\"flex items-center justify-between\">\r\n              <div className=\"flex items-center\">\r\n                <input\r\n                  id=\"remember-me\"\r\n                  name=\"remember-me\"\r\n                  type=\"checkbox\"\r\n                  checked={rememberMe}\r\n                  onChange={(e) => setRememberMe(e.target.checked)}\r\n                  className=\"h-4 w-4 text-[#002760] focus:ring-[#002760] border-gray-300 rounded\"\r\n                />\r\n                <label htmlFor=\"remember-me\" className=\"ml-2 block text-sm text-gray-700\">\r\n                  记住我\r\n                </label>\r\n              </div>\r\n\r\n              <div className=\"text-sm\">\r\n                <Link\r\n                  href=\"/auth/forgot-password\"\r\n                  className=\"font-medium text-[#002760] hover:text-[#001d47] transition-colors\"\r\n                >\r\n                  忘记密码?\r\n                </Link>\r\n              </div>\r\n            </div>\r\n\r\n            <div>\r\n              <button\r\n                type=\"submit\"\r\n                disabled={isLoading}\r\n                className=\"group relative w-full flex justify-center py-3 px-4 border border-transparent rounded-xl text-sm font-bold text-white bg-[#002760] hover:bg-[#001d47] focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-[#002760] disabled:opacity-50 disabled:cursor-not-allowed transition-all duration-200 shadow-lg hover:shadow-xl\"\r\n              >\r\n                <span className=\"absolute left-0 inset-y-0 flex items-center pl-3\">\r\n                  <LogIn size={20} className=\"text-yellow-400\" />\r\n                </span>\r\n                {isLoading ? \"登录中...\" : \"登录\"}\r\n              </button>\r\n            </div>\r\n          </form>\r\n\r\n          <div className=\"mt-6\">\r\n            <div className=\"relative\">\r\n              <div className=\"absolute inset-0 flex items-center\">\r\n                <div className=\"w-full border-t border-gray-300\" />\r\n              </div>\r\n              <div className=\"relative flex justify-center text-sm\">\r\n                <span className=\"px-2 bg-white text-gray-500\">其他登录方式</span>\r\n              </div>\r\n            </div>\r\n\r\n            <div className=\"mt-6 grid grid-cols-2 gap-3\">\r\n              <button\r\n                onClick={() => handleSocialLogin(\"微信\")}\r\n                className=\"w-full inline-flex justify-center items-center py-2.5 px-4 border border-gray-300 rounded-xl shadow-sm bg-white text-sm font-medium text-gray-700 hover:bg-gray-50 transition-colors\"\r\n              >\r\n                <div className=\"w-5 h-5 mr-2 relative\">\r\n                  <Image\r\n                    src=\"https://img.icons8.com/color/48/000000/wechat.png\"\r\n                    alt=\"微信\"\r\n                    fill\r\n                    className=\"object-contain\"\r\n                  />\r\n                </div>\r\n                微信\r\n              </button>\r\n              <button\r\n                onClick={() => handleSocialLogin(\"Google\")}\r\n                className=\"w-full inline-flex justify-center items-center py-2.5 px-4 border border-gray-300 rounded-xl shadow-sm bg-white text-sm font-medium text-gray-700 hover:bg-gray-50 transition-colors\"\r\n              >\r\n                <div className=\"w-5 h-5 mr-2 relative\">\r\n                  <Image\r\n                    src=\"https://img.icons8.com/color/48/000000/google-logo.png\"\r\n                    alt=\"Google\"\r\n                    fill\r\n                    className=\"object-contain\"\r\n                  />\r\n                </div>\r\n                Google\r\n              </button>\r\n            </div>\r\n          </div>\r\n\r\n          <div className=\"mt-8 text-center\">\r\n            <p className=\"text-sm text-gray-600\">\r\n              还没有账户?{' '}\r\n              <Link\r\n                href=\"/auth/register\"\r\n                className=\"font-medium text-[#002760] hover:text-[#001d47] transition-colors\"\r\n              >\r\n                立即注册\r\n              </Link>\r\n            </p>\r\n          </div>\r\n\r\n          <div className=\"mt-6 text-center text-xs text-gray-500\">\r\n            <p>登录即表示您同意我们的</p>\r\n            <p>\r\n              <Link href=\"/terms\" className=\"text-[#002760] hover:underline\">服务条款</Link>\r\n              {' '}和{' '}\r\n              <Link href=\"/privacy\" className=\"text-[#002760] hover:underline\">隐私政策</Link>\r\n            </p>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  )\r\n}"],"names":[],"mappings":"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"}}]
}